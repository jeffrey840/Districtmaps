<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
</head>
<body>


<script>


	// ...

	document.getElementById('districtDropdown').addEventListener('click', function (event) {
		if (event.target.classList.contains('dropdown-item')) {
			const districtNumber = event.target.innerText.split(' ')[1]; // Assuming format "district X"
			document.getElementById('districtTitle').innerText = event.target.innerText;
			fetchDistrictDataAndGeoJSON(districtNumber);
		}
	});

	let currentDisplayData = [];
	let filteredData = [];
	let currentPage = 1;
	const cardsPerPage = 10;
	let filterCriteria = {
		minPrice: 0,
		maxPrice: Infinity,
		bedrooms: 'any',
		bathrooms: 'any',
		homeType: new Set()
	};

	// ...

	async function fetchDistrictDataAndGeoJSON(districtNumber) {
		// ... Existing logic ...

		// After fetching and spatially filtering data:
		currentDisplayData = filteredJsonData;
		createCards(currentDisplayData);
	}

	function applyFilters() {
		console.log("Applying filters with criteria: ", filterCriteria);

		let currentFilteredData = currentDisplayData.filter(listing => {
			// ... Existing filtering logic ...
		});
		console.log("Combined filters applied. Number of items after filtering:", currentFilteredData.length);

		currentDisplayData = currentFilteredData;
		currentPage = 1;
		createCards(currentDisplayData);
	}

	// ... Modify other filtering functions similarly to use currentDisplayData ...

	// ...



</script>


</body>
</html>