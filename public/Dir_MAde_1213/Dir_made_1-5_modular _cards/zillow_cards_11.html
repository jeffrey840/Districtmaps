<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Zillow Listings 6</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
	<script src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap" async defer></script>
</head>
<body>

<div class="container-fluid" style="font-family: 'Lato', sans-serif;">

	<!-- Navbar with Search Bar -->
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid">
			<!-- For Sale Dropdown -->
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="dropdown-title" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						For Sale
					</a>
					<ul class="dropdown-menu" aria-labelledby="dropdown-title">
						<li><a class="dropdown-item" href="#" onclick="updateSaleTitle('ForSale')">For Sale</a></li>
						<li><a class="dropdown-item" href="#" onclick="updateSaleTitle('ForRent')">For Rent</a></li>
						<li><a class="dropdown-item" href="#" onclick="updateSaleTitle('RecentlySold')">Sold</a></li>
					</ul>
				</li>
			</ul>
			<form class="d-flex">
				<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
				<button class="btn btn-outline-success" type="submit">Search</button>
			</form>

			<!-- Price Range Dropdown -->
			<ul class="navbar-nav">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="price-range-title" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						Price Range
					</a>
					<div class="dropdown-menu">
						<form class="px-4 py-3" id="price-range-form">
							<div class="mb-3">
								<label for="min-price" class="form-label">Minimum</label>
								<input type="number" class="form-control" id="min-price" placeholder="Enter number">
							</div>
							<div class="mb-3">
								<label for="max-price" class="form-label">Maximum</label>
								<select class="form-select" id="max-price">
									<!-- Options added via JavaScript -->
								</select>
							</div>
							<button type="button" class="btn btn-primary" onclick="applyPriceRange()">Apply</button>
						</form>
					</div>
				</li>
			</ul>

			<!-- Beds & Baths Dropdown -->
			<ul class="navbar-nav">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="beds-baths-title" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						Beds & Baths
					</a>
					<div class="dropdown-menu">
						<div class="px-4 py-3" id="bedroom-options">
							<span>Bedrooms:</span>
							<!-- Bedroom option buttons with Bootstrap styling -->
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bedrooms', 'any')">Any</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bedrooms', 1)">1</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bedrooms', 2)">2</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bedrooms', 3)">3</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bedrooms', 4)">4</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bedrooms', 5)">5</button>
						</div>
						<div class="px-4 py-3" id="bathroom-options">
							<span>Bathrooms:</span>
							<!-- Bathroom option buttons with Bootstrap styling -->
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bathrooms', 'any')">Any</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bathrooms', 1)">1</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bathrooms', 2)">2</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bathrooms', 3)">3</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bathrooms', 4)">4</button>
							<button class="btn btn-outline-secondary m-1" onclick="selectOption('bathrooms', 5)">5</button>
						</div>
						<button type="button" class="btn btn-primary" onclick="applyBedsBaths()">Apply</button>
					</div>
				</li>
			</ul>

			<!-- Home Type Dropdown -->
			<ul class="navbar-nav">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="home-type-title" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						Home Type
					</a>
					<div class="dropdown-menu">
						<form class="px-4 py-3" id="home-type-form">
							<div class="mb-3">
								<label>
									<input type="radio" name="select-all" onclick="toggleSelectAll(true)"> Select All
								</label>
								<label>
									<input type="radio" name="select-all" onclick="toggleSelectAll(false)"> Deselect All
								</label>
							</div>
							<div>
								<label class="form-check">
									<input type="checkbox" class="form-check-input" name="home-type" value="House" onclick="updateHomeType()"> House
								</label>
								<label class="form-check">
									<input type="checkbox" class="form-check-input" name="home-type" value="town-home" onclick="updateHomeType()"> Town Home
								</label>
								<!-- Additional checkboxes for other home types -->
							</div>
							<button type="button" class="btn btn-primary" onclick="applyHomeType()">Apply</button>
						</form>
					</div>
				</li>
			</ul>
		</div>
	</nav>

	<!-- Row for Cards and Map -->
	<div class="row">
		<!-- Left Column with Cards -->
		<div class="col-md-6" style="height: 100vh">
			<!-- Scrollable area for cards -->
			<div class="overflow-y-auto h-100">
				<div style="display: grid; grid-template-columns: repeat(2, 1fr); grid-gap: 10px;" id="card-container" >
					<!-- Cards will be dynamically loaded here -->
				</div>
			</div>
		</div>

		<!-- Right Column with Map -->
		<div class="col-md-6">
			<div id="map-container" style="height: 100vh;">
				<!-- Map will be displayed here -->
			</div>
		</div>
	</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
	// Function to create cards dynamically
	function createCards(cardsData) {
		const container = document.getElementById('card-container');
		container.innerHTML = ''; // Clear existing content

		cardsData.forEach(card => {
			// Assuming 'card' contains fields such as price, bedrooms, etc.
			const cardElement = document.createElement('div');
			cardElement.className = 'card';
			cardElement.style = "width: 100%; margin-bottom: 10px;";
			cardElement.innerHTML = `
        <div class="photo" style="height: 120px; background-position: center; background-repeat: no-repeat; background-size: cover; display: flex; justify-content: space-between; background-image: url('${card.imgSrc}');">
          <!-- Other card elements -->
        </div>
        <div class="description" style="padding: 8px;">
          <div class="price" style="font-size: 1.2em; font-weight: bolder;">${card.price}</div>
          <div class="info" style="font-size: 0.75em;">${card.bedrooms} bds ${card.bathrooms} ba ${card.livingArea} sqft</div>
          <div class="address" style="font-size: 0.75em;">${card.address}</div>
        </div>
      `;
			container.appendChild(cardElement);
		});
	}

	// Function to fetch JSON data and extract specified fields from each item in 'props'
	async function fetchAndExtractData() {
		try {
			const response = await fetch('https://raw.githubusercontent.com/jeffrey840/zipcode_2/main/zillow_listings_77096_page1.json');
			if (!response.ok) {
				throw new Error(`HTTP error! status: ${response.status}`);
			}
			const data = await response.json();
			const extractedData = data.props.map(({ price, bedrooms, address, imgSrc, bathrooms, livingArea, currency, lotAreaUnit, daysOnZillow }) =>
				({ price, bedrooms, address, imgSrc, bathrooms, livingArea, currency, lotAreaUnit, daysOnZillow }));
			createCards(extractedData); // Call createCards to display the data
		} catch (error) {
			console.error('Error fetching data: ', error);
		}
	}

	// Call the fetchAndExtractData function when the DOM content is loaded
	document.addEventListener('DOMContentLoaded', fetchAndExtractData);

	// Function to initialize Google Map
	function initMap() {
		var map = new google.maps.Map(document.getElementById('map-container'), {
			center: {lat: 29.760799, lng: -95.369507},
			zoom: 12
		});
	}
</script>

</body>
</html>
