<html>
<head>
	<title>Simple Map</title>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

	<link rel="stylesheet" type="text/css" href="../src/index.css" />

</head>
<body>
<!--https://stackoverflow.com/questions/11147803/how-to-use-zip-code-instead-lat-and-lng-in-google-maps-api-->


<!--============== ZILLOW ==============-->

<!--<script type="module">-->

<!--	const url = 'https://zillow-com1.p.rapidapi.com/buildWebUrl?location=Houston&home_type=Houses';-->
<!--	const options = {-->
<!--		method: 'GET',-->
<!--		headers: {-->
<!--			'X-RapidAPI-Key': '',-->
<!--			'X-RapidAPI-Host': 'zillow-com1.p.rapidapi.com'-->
<!--		}-->
<!--	};-->
<!--	try {-->
<!--		const response = await fetch(url, options);-->
<!--		const result = await response.text();-->
<!--		console.log(result);-->
<!--	} catch (error) {-->
<!--		console.error(error);-->
<!--	}-->
<!--</script>-->

<!--============== NEW MAP SHOWING BOUNDARIES ==============-->

<div id="container">
	<div id="map"></div>
	<div id="sidebar"></div>
</div>

<button id="toggleButton">Toggle KML Overlay</button>



<!--<script type="module">-->
<!--	function initMap() {-->
<!--		const map = new google.maps.Map(document.getElementById("map"), {-->
<!--			zoom: 12,-->
<!--			center: { lat: 37.06, lng: -95.68 },-->
<!--		});-->

<!--		// KML Layer for zip77056-->
<!--		const kmlLayer = new google.maps.KmlLayer({-->
<!--			url: "https://raw.githubusercontent.com/jeffrey840/zipcode_2/main/zip77056.kml",-->
<!--			suppressInfoWindows: true,-->
<!--			map: map,-->
<!--		});-->

<!--		kmlLayer.addListener("click", (kmlEvent) => {-->
<!--			const text = kmlEvent.featureData.description;-->
<!--			showInContentWindow(text);-->
<!--		});-->

<!--		// Load KML file using fetch-->
<!--		fetch("https://raw.githubusercontent.com/jeffrey840/zipcode_2/main/zip77056.kml")-->
<!--			.then(response => response.text())-->
<!--			.then(data => parseKmlCoordinates(data))-->
<!--			.catch(error => console.error(error));-->

<!--		function parseKmlCoordinates(kmlData) {-->
<!--			const parser = new DOMParser();-->
<!--			const xmlDoc = parser.parseFromString(kmlData, "text/xml");-->

<!--			const coordinatesElement = xmlDoc.querySelector("LinearRing coordinates");-->
<!--			const coordinatesText = coordinatesElement.textContent.trim();-->
<!--			const coordinatePairs = coordinatesText.split(" ");-->

<!--			const coordinates = coordinatePairs.map(pair => {-->
<!--				const [lng, lat] = pair.split(",");-->
<!--				return { lat: parseFloat(lat), lng: parseFloat(lng) };-->
<!--			});-->

<!--			placeRedDots(coordinates);-->
<!--		}-->

<!--		function placeRedDots(coordinates) {-->
<!--			coordinates.forEach(coordinate => {-->
<!--				new google.maps.Marker({-->
<!--					position: coordinate,-->
<!--					map: map,-->
<!--					icon: {-->
<!--						path: google.maps.SymbolPath.CIRCLE,-->
<!--						fillColor: "red",-->
<!--						fillOpacity: 1,-->
<!--						strokeColor: "white",-->
<!--						strokeWeight: 2,-->
<!--						scale: 4,-->
<!--					},-->
<!--				});-->
<!--			});-->
<!--		}-->

<!--		function showInContentWindow(text) {-->
<!--			const sidebar = document.getElementById("sidebar");-->
<!--			sidebar.innerHTML = text;-->
<!--		}-->
<!--	}-->

<!--	window.initMap = initMap;-->
<!--</script>-->


<script type="module">
	let map, kmlLayer;

	function initMap() {
		map = new google.maps.Map(document.getElementById("map"), {
			zoom: 12,
			center: { lat: 37.06, lng: -95.68 },
		});

		kmlLayer = new google.maps.KmlLayer({
			url: "https://raw.githubusercontent.com/jeffrey840/zipcode_2/main/zip77056.kml",
			suppressInfoWindows: true,
			map: map,
		});

		kmlLayer.addListener("click", (kmlEvent) => {
			const text = kmlEvent.featureData.description;
			showInContentWindow(text);
		});

		document.getElementById("toggleButton").addEventListener("click", toggleKML);
	}

	function toggleKML() {
		if (kmlLayer.getMap() === null) {
			kmlLayer.setMap(map);
		} else {
			kmlLayer.setMap(null);
		}
	}

	function showInContentWindow(text) {
		const sidebar = document.getElementById("sidebar");
		sidebar.innerHTML = text;
	}
	window.initMap = initMap;




</script>
<!--  https://maps.googleapis.com/maps/api/js?key=GOOGLE_MAPS_API_KEY&callback=initMap -->
<script
		src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap"
		defer
></script>
</body>
</html>



