<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
</head>
<body>


<script>

	async function fetchAllDataAndCreateSeparateJSONFiles(apiEndpoint, apiKey) {
		const headers = {
			"X-RapidAPI-Key": apiKey,
			"X-RapidAPI-Host": "zillow-com1.p.rapidapi.com"
		};

		// Fetch initial page to get total number of pages
		try {
			const initialResponse = await fetch(`${apiEndpoint}&page=1`, { headers });
			const initialData = await initialResponse.json();
			const totalPages = initialData.totalPages;

			for (let page = 1; page <= totalPages; page++) {
				const response = await fetch(`${apiEndpoint}&page=${page}`, { headers });
				const data = await response.json();
				saveDataAsJSON(data, `json_data_${page}.json`);
			}
		} catch (error) {
			console.error("Error fetching data:", error);
		}
	}

	function saveDataAsJSON(data, fileName) {
		const dataStr = JSON.stringify(data, null, 4);
		const blob = new Blob([dataStr], { type: "application/json" });
		const url = URL.createObjectURL(blob);

		const a = document.createElement("a");
		a.href = url;
		a.download = fileName;
		document.body.appendChild(a);
		a.click();
		setTimeout(() => {
			document.body.removeChild(a);
			window.URL.revokeObjectURL(url);
		}, 0);
	}

	// Example usage:
	fetchAllDataAndCreateSeparateJSONFiles('https://zillow-com1.p.rapidapi.com/propertyExtendedSearch?location=77080', '');

</script>

</body>
</html>